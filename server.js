const a0_0x507ccc=a0_0x5e7b;function a0_0x47c1(){const _0x5dddd6=['env','hex','server.key','express','status','send','public','strict','7712412cMCVpE','crypto','join','37204rfbywE','CSRF-TOKEN','config','randomBytes','readFileSync','csurf','22cWYBks','6JviaDO','X-Content-Type-Options','nosniff','328329EIufjQ','stack','static','cookie-parser','error','cookie','4158rHMAOw','body-parser','./database','7313395AfuJpD','./routes','utf8','max-age=63072000;\x20includeSubDomains;\x20preload','19140ZznpTj','321iRiFaH','Strict-Transport-Security','7AKbHtz','https','2929832YfaPGm','server.cert','locals','listen','mkdirSync','csrfToken','use','info','createServer','json','logs','Something\x20broke!','136246xTDJGX','setHeader'];a0_0x47c1=function(){return _0x5dddd6;};return a0_0x47c1();}(function(_0x4fbcb5,_0x3fe6b6){const _0x4eeee5=a0_0x5e7b,_0x429b90=_0x4fbcb5();while(!![]){try{const _0x556978=-parseInt(_0x4eeee5(0x1ad))/0x1+parseInt(_0x4eeee5(0x196))/0x2+parseInt(_0x4eeee5(0x1bb))/0x3*(-parseInt(_0x4eeee5(0x1a3))/0x4)+parseInt(_0x4eeee5(0x1b6))/0x5*(parseInt(_0x4eeee5(0x1aa))/0x6)+parseInt(_0x4eeee5(0x1bd))/0x7*(parseInt(_0x4eeee5(0x1bf))/0x8)+-parseInt(_0x4eeee5(0x1b3))/0x9*(parseInt(_0x4eeee5(0x1ba))/0xa)+-parseInt(_0x4eeee5(0x1a9))/0xb*(-parseInt(_0x4eeee5(0x1a0))/0xc);if(_0x556978===_0x3fe6b6)break;else _0x429b90['push'](_0x429b90['shift']());}catch(_0x4ecda5){_0x429b90['push'](_0x429b90['shift']());}}}(a0_0x47c1,0xedf25),require('dotenv')[a0_0x507ccc(0x1a5)]());const express=require(a0_0x507ccc(0x19b)),routes=require(a0_0x507ccc(0x1b7)),db=require(a0_0x507ccc(0x1b5)),app=express(),fs=require('fs'),https=require(a0_0x507ccc(0x1be)),session=require('express-session'),path=require('path'),logger=require('./logger'),bodyParser=require(a0_0x507ccc(0x1b4)),helmet=require('helmet'),csurf=require(a0_0x507ccc(0x1a8)),cookieParser=require(a0_0x507ccc(0x1b0)),crypto=require(a0_0x507ccc(0x1a1)),logsDir=path[a0_0x507ccc(0x1a2)](__dirname,a0_0x507ccc(0x194));!fs['existsSync'](logsDir)&&fs[a0_0x507ccc(0x18e)](logsDir);const privateKey=fs['readFileSync'](a0_0x507ccc(0x19a),'utf8'),certificate=fs[a0_0x507ccc(0x1a7)](a0_0x507ccc(0x1c0),a0_0x507ccc(0x1b8)),credentials={'key':privateKey,'cert':certificate};app[a0_0x507ccc(0x190)](helmet()),app[a0_0x507ccc(0x190)](cookieParser()),app[a0_0x507ccc(0x190)](express[a0_0x507ccc(0x193)]()),app['use'](bodyParser['json']()),app[a0_0x507ccc(0x190)](express[a0_0x507ccc(0x1af)](a0_0x507ccc(0x19e))),app[a0_0x507ccc(0x190)](session({'secret':process[a0_0x507ccc(0x198)]['SECRET'],'resave':![],'saveUninitialized':!![],'cookie':{'secure':!![],'httpOnly':!![],'path':'/','maxAge':0x36ee80,'sameSite':a0_0x507ccc(0x19f)},'genid':function(_0x4c88cb){const _0x2b9a5c=a0_0x507ccc;return crypto[_0x2b9a5c(0x1a6)](0x10)['toString'](_0x2b9a5c(0x199));}}));const csrfProtection=csurf({'cookie':{'httpOnly':!![],'secure':!![],'sameSite':a0_0x507ccc(0x19f)}});app[a0_0x507ccc(0x190)](csrfProtection),app[a0_0x507ccc(0x190)]((_0x5b2773,_0x2966a9,_0x2b154e)=>{const _0x1ffc6e=a0_0x507ccc;_0x2966a9[_0x1ffc6e(0x1c1)][_0x1ffc6e(0x18f)]=_0x5b2773[_0x1ffc6e(0x18f)](),_0x2966a9[_0x1ffc6e(0x1b2)](_0x1ffc6e(0x1a4),_0x2966a9[_0x1ffc6e(0x1c1)][_0x1ffc6e(0x18f)]),_0x2b154e();}),app['use']((_0x41de14,_0xe09221,_0x3a5b21)=>{const _0x1a7eb0=a0_0x507ccc;_0xe09221[_0x1a7eb0(0x197)]('X-Frame-Options','DENY'),_0xe09221[_0x1a7eb0(0x197)](_0x1a7eb0(0x1bc),_0x1a7eb0(0x1b9)),_0xe09221[_0x1a7eb0(0x197)](_0x1a7eb0(0x1ab),_0x1a7eb0(0x1ac)),_0x3a5b21();}),app[a0_0x507ccc(0x190)]('/',routes),app[a0_0x507ccc(0x190)](function(_0x49784c,_0x182a0,_0x5affe2,_0x1caf5c){const _0x5a4008=a0_0x507ccc;console[_0x5a4008(0x1b1)](_0x49784c[_0x5a4008(0x1ae)]),_0x5affe2[_0x5a4008(0x19c)](0x1f4)[_0x5a4008(0x19d)](_0x5a4008(0x195));});function a0_0x5e7b(_0x2c78ce,_0x2641be){const _0x47c1f0=a0_0x47c1();return a0_0x5e7b=function(_0x5e7bf2,_0x128c5d){_0x5e7bf2=_0x5e7bf2-0x18e;let _0x6d4d71=_0x47c1f0[_0x5e7bf2];return _0x6d4d71;},a0_0x5e7b(_0x2c78ce,_0x2641be);}const httpsServer=https[a0_0x507ccc(0x192)](credentials,app);httpsServer[a0_0x507ccc(0x1c2)](0xbb8,()=>{const _0x339993=a0_0x507ccc;logger[_0x339993(0x191)]('HTTPS\x20Server\x20listening\x20at\x20https://localhost:3000');});